---
title: 'Datasets'
---

Prompt datasets are simply a collection of
[Prompts](https://github.com/unifyai/unify/blob/26247d88da2d46dea62fe0a665934f7f98523c92/unify/types.py#L23)
which are stored in your account,
with extra corresponding fields optionally also included in the dataset,
such as reference answers etc.

The primary use case for these datasets is to group prompts into various helpful test
cases and test sets, which can then form part of an evaluation pipeline.

Firstly, we cover topics focused on local development: [Creation](#creation),
[Indexing and Iterating](#indexing-and-iterating), [Combining](#combining)
and [Trimming](#trimming). This covers everything you need to know for purely local development,
which can be great for initial experimentation.

However, if
you need these experiments to be preserved across sessions,
you need to work with other team members, or you need to handle large volumes of data,
then you'll need to connect and synchronize your datasets with your unify account.
This is what's covered in the final sections: [Uploading](#uploading),
[Downloading](#downloading) and [Synchronizing](#synchronizing).

## Creation

Creating a local prompt dataset is very simple:

```python
import unify
dataset = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message."
])
```

When a list of strings is passed, these strings are interpreted as *user messages*,
but the underlying dataset will contains `DatasetEntry` instances, which themselves
contain `Prompt` instances:

```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        )
    ]
)
```

Prompts can also be passed directly into the constructor:

```python
import unify
dataset = unify.Dataset([
    unify.Prompt(
        messages=[{'content': 'First user message.', 'role': 'user'}],
        temperature=0.2
    ),
    unify.Prompt(
        messages=[{'content': 'Second user message.', 'role': 'user'}],
        temperature=0.4
    ),
    unify.Prompt(
        messages=[{'content': 'Third user message.', 'role': 'user'}],
        temperature=0.6
    ),
])
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}],
                temperature=0.4
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}],
                temperature=0.6
            )
        )
    ]
)
```

Similarly, DatasetEntry instances can also be passed into the constructor, which can
optionally have extra arbitrary fields (due to `extra=Extra.allow`),
such as `ref_answer`:

```python
import unify
dataset = unify.Dataset([
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="First answer."
    ),
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="Second answer."
    ),
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="Third answer."
    ),
])
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='First answer.'
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='Second answer.'
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='Third answer.'
        )
    ]
)
```

## Indexing and Iterating

Datasets can be iterated over as follows:

```python
import unify
dataset = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message."
])
for entry in dataset:
    assert isinstance(entry, unify.DatasetEntry)
    print(entry)
```

Similarly, they can be indexed:

```python
import unify
dataset = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message."
])
assert isinstance(dataset[1], unify.DatasetEntry)
print(dataset[1])
```

## Combining

Datasets can be added together to create combined datasets easily:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
])
dataset2 = unify.Dataset([
    "Third user message.",
    "Fourth user message.",
])
print(dataset1 + dataset2)
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Fourth user message.', 'role': 'user'}]
            )
        )
    ]
)
```

Duplicates will also be handled, such that entries in both datasets are not repeated:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
])
dataset2 = unify.Dataset([
    "Second user message.",
    "Third user message.",
])
print(dataset1 + dataset2)
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        )
    ]
)
```

In the above example, a new `Dataset` instance is created. However, datasets can also be
updated inplace via addition, as follows:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
])
dataset2 = unify.Dataset([
    "Third user message.",
    "Fourth user message.",
])
dataset1 += dataset2
```

## Trimming

Datasets can also be subtracted from one another easily:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message.",
    "Fourth user message.",
])
dataset2 = unify.Dataset([
    "Second user message.",
    "Fourth user message.",
])
print(dataset1 - dataset2)
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        )
    ]
)
```

As with addition, in the above examples a new `Dataset` instance is created.
However, datasets can also be updated inplace via subtraction, as follows:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message.",
    "Fourth user message.",
])
dataset2 = unify.Dataset([
    "Second user message.",
    "Fourth user message.",
])
dataset1 -= dataset2
```

## Uploading

You can see your listed datasets on the [Datasets](https://console.unify.ai/datasets)
page of your account.

<p align="left">
    <img src="/images/datasets_page_empty.png" alt="Datasets Empty" />
</p>

By default, there is a single dataset added to all new accounts: "Open Hermes".
This is...

In order to synchronize your local dataset with an upstream dataset in the platform,
your dataset **needs to have a name**.

If this was not set in the constructor, then it can be set as follows:

```python
dataset.set_name("my_dataset")
```

Provided your dataset has a name, it can then be uploaded to your account like so:

```python
dataset.upload()
```

This will not overwrite any dataset entries which are contained in the upstream dataset,
it will only add any missing entries.
If you want to fully overwrite any existing upstream dataset called "my_dataset",
then pass `overwrite=True`:

```python
dataset.upload(overwrite=True)
```

Once your dataset has been uploaded, you'll be able to see it in the console like so:

<p align="left">
    <img src="/images/datasets_page_w_upload.png" alt="Datasets with Upload" />
</p>

The dataset can be renamed, deleted, and viewed from the console.
Clicking `View Dataset` will present the following view of the dataset:

IMAGE

## Downloading



## Synchronizing
