---
title: 'Datasets'
---

Prompt datasets are simply a collection of
[Prompts](https://github.com/unifyai/unify/blob/26247d88da2d46dea62fe0a665934f7f98523c92/unify/types.py#L23)
which are stored in your account,
with extra corresponding fields optionally also included in the dataset,
such as reference answers etc.

The primary use case for these datasets is to group prompts into various helpful test
cases and test sets, which can then form part of an evaluation pipeline.

## Creating a Dataset

Creating a local prompt dataset is very simple:

```python
import unify
dataset = unify.Dataset([
    "First user message.",
    "Second user message.",
    "Third user message."
])
```

When a list of strings is passed, these strings are interpreted as *user messages*,
but the underlying dataset will contains `DatasetEntry` instances, which themselves
contain `Prompt` instances:

```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        )
    ]
)
```

Prompts can also be passed directly into the constructor:

```python
import unify
dataset = unify.Dataset([
    unify.Prompt(
        messages=[{'content': 'First user message.', 'role': 'user'}],
        temperature=0.2
    ),
    unify.Prompt(
        messages=[{'content': 'Second user message.', 'role': 'user'}],
        temperature=0.4
    ),
    unify.Prompt(
        messages=[{'content': 'Third user message.', 'role': 'user'}],
        temperature=0.6
    ),
])
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}],
                temperature=0.4
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}],
                temperature=0.6
            )
        )
    ]
)
```

Similarly, DatasetEntry instances can also be passed into the constructor, which can
optionally have extra arbitrary fields (due to `extra=Extra.allow`),
such as `ref_answer`:

```python
import unify
dataset = unify.Dataset([
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="First answer."
    ),
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="Second answer."
    ),
    unify.DatasetEntry(
        prompt=unify.Prompt(
            messages=[{'content': 'First user message.', 'role': 'user'}],
            temperature=0.2
        ),
        ref_answer="Third answer."
    ),
])
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='First answer.'
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='Second answer.'
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}],
                temperature=0.2
            ),
            ref_answer='Third answer.'
        )
    ]
)
```

## Adding Datasets

Datasets can be added together to create combined datasets easily:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
])
dataset2 = unify.Dataset([
    "Third user message.",
    "Fourth user message.",
])
print(dataset1 + dataset2)
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Fourth user message.', 'role': 'user'}]
            )
        )
    ]
)
```

Duplicates will also be handled, such that entries in both datasets are not repeated:

```python
import unify
dataset1 = unify.Dataset([
    "First user message.",
    "Second user message.",
])
dataset2 = unify.Dataset([
    "Second user message.",
    "Third user message.",
])
print(dataset1 + dataset2)
```
```
Dataset(
    [
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'First user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Second user message.', 'role': 'user'}]
            )
        ),
        DatasetEntry(
            prompt=Prompt(
                messages=[{'content': 'Third user message.', 'role': 'user'}]
            )
        )
    ]
)
```