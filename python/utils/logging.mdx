---
title: 'logging'
---

<a id="utils.logging.get_query_tags"></a>

---

### get\_query\_tags

```python
def get_query_tags(api_key: Optional[str] = None) -> List[str]
```

Get a list of available query tags.

**Arguments**:

- `api_key` - If specified, unify API key to be used. Defaults
  to the value in the `UNIFY_KEY` environment variable.
  

**Returns**:

  A list of available query tags if successful, otherwise an empty list.

<a id="utils.logging.get_queries"></a>

---

### get\_queries

```python
def get_queries(tags: Optional[Union[str, List[str]]] = None,
                endpoints: Optional[Union[str, List[str]]] = None,
                start_time: Optional[datetime.datetime] = None,
                end_time: Optional[datetime.datetime] = None,
                api_key: Optional[str] = None) -> Dict[str, Any]
```

Get query history based on specified filters.

**Arguments**:

- `tags` - Tags to filter for queries that are marked with these tags.
- `endpoints` - Optionally specify an endpoint, or a list of endpoints to filter for.
- `start_time` - Timestamp of the earliest query to aggregate. Format is `YYYY-MM-DD hh:mm:ss`.
- `end_time` - Timestamp of the latest query to aggregate. Format is `YYYY-MM-DD hh:mm:ss`.
- `api_key` - If specified, unify API key to be used. Defaults to the value in the `UNIFY_KEY` environment variable.
  

**Returns**:

  A dictionary containing the query history data.

<a id="utils.logging.log_query"></a>

---

### log\_query

```python
def log_query(endpoint: str,
              query_body: Dict,
              response_body: Optional[Dict] = None,
              tags: Optional[List[str]] = None,
              timestamp: Optional[datetime.datetime] = None,
              api_key: Optional[str] = None)
```

Log a query (and optionally response) for a locally deployed (non-Unify-registered)
model, with tagging (default None) and timestamp (default datetime.now() also
optionally writeable.

**Arguments**:

- `endpoint` - Endpoint to log query for.
- `query_body` - A dict containing the body of the request.
- `response_body` - An optional dict containing the response to the request.
- `tags` - Custom tags for later filtering.
- `timestamp` - A timestamp (if not set, will be the time of sending).
- `api_key` - If specified, unify API key to be used. Defaults to the value in the `UNIFY_KEY` environment variable.
  

**Returns**:

  A dictionary containing the response message if successful.
  

**Raises**:

- `requests.HTTPError` - If the API request fails.

<a id="utils.logging.get_query_metrics"></a>

---

### get\_query\_metrics

```python
def get_query_metrics(start_time: Optional[datetime.datetime] = None,
                      end_time: Optional[datetime.datetime] = None,
                      models: Optional[str] = None,
                      providers: Optional[str] = None,
                      interval: int = 300,
                      secondary_user_id: Optional[str] = None,
                      api_key: Optional[str] = None) -> Dict[str, Any]
```

Get query metrics for specified parameters.

**Arguments**:

- `start_time` - Timestamp of the earliest query to aggregate. Format is `YYYY-MM-DD hh:mm:ss`.
- `end_time` - Timestamp of the latest query to aggregate. Format is `YYYY-MM-DD hh:mm:ss`.
- `models` - Models to fetch metrics from. Comma-separated string of model names.
- `providers` - Providers to fetch metrics from. Comma-separated string of provider names.
- `interval` - Number of seconds in the aggregation interval. Default is 300.
- `secondary_user_id` - Secondary user id to match the `user` attribute from `/chat/completions`.
- `api_key` - If specified, unify API key to be used. Defaults to the value in the `UNIFY_KEY` environment variable.
  

**Returns**:

  A dictionary containing the query metrics.

<a id="utils.custom_api_keys"></a>
